# Utils

* [Item 1](#item-1-filename): filename - Creates proper filenames from string input
* [Item 2](#item-2-project): project - Simple script to manage project folder
* [Item 3](#item-3-template): template - Replaces placeholder from given template
* [Item 4](#item-4-wordlist-diff): wordlist-diff - Prints all elements not in a list

**Installation**

1. Clone repository (Skip this step if already done)
```bash
git clone https://github.com/GhostActive/practical-shell-for-pentesting.git
```
2. Goto subfolder `utils/` and set executable flag
```bash
cd practical-shell-for-pentesting/utils/ && chmod +x filename project
```
3. Copy scripts to a folder defined in $PATH (e.g. `/usr/local/bin/` or `/usr/bin/`)
```bash
sudo cp filename project /usr/local/bin/
```

**Installation - Only for script *Item 2: project***

The script *project* requires the definition of the following values as global environment variables:

Bash - Append the following variables to `~/.bashrc`. Reload the modified configuration file with command `source` or close and open new shell to make variables available.
```bash
# Root folder to store projects - Use an existing directory of your choice, e.g.
export PROJECTS_PATH ~/Projects
 
# Reference to current project folder
export PROJECT $PROJECTS_PATH/current
 
# Reference to current project's output folder 
export OUTPUT $PROJECTS_PATH/current/out

# Template folder used for initiating new project folder
export PROJECT_TEMPLATE $PROJECTS_PATH/template
```

Fish - Append the following variables to `~/.config/config.fish`. Reload the modified configuration file with command `source` or close and open new shell to make variables available.
```bash
# Root folder to store projects - Use an existing directory of your choice, e.g.
set -Ux PROJECTS_PATH ~/Projects
 
# Reference to current project folder
set -Ux PROJECT $PROJECTS_PATH/current
 
# Reference to current project's output folder 
set -Ux OUTPUT $PROJECTS_PATH/current/out

# Template folder used for initiating new project folder
set -Ux PROJECT_TEMPLATE $PROJECTS_PATH/template
```

**Installation - Only for script *Item 3: template***

For the processing of templates in edit mode the global environment variable `$EDITOR` is used.

Check if variable is set:
```bash
echo $EDITOR
```
If not set, define a text editor as global environment variable `$EDITOR`. The support for text editors was tested with vim (Tip: define `vim -n` disable swap files) and nano.

## Item 1: filename

```
$ filename --help

filename - Converts a list of string arguments containing special
           characters to a proper filename.

Usage: filename STRING...

Description:
    Converts a list of arguments containing special characters to a proper
    filename. Spaces and special characters are replaced by character '-'.
    Strings containing multiple times '-', like '--' or '---', are
    reduced to single '-'.

Examples:
    # Converting URL
    $ filename http://localhost:8080
    http-localhost-8080

    # Converting filename
    $ filename README.txt
    README-txt

    # Converting multiple input
    $ filename this is a hello world string
    this-is-a-hello-world-string
```

## Item 2: project

```
$ ./project --help

project - Creates new project folder

Usage: project [String...]

Options:
    -h, --help      Print this help message

Description
    Creates a new project folder in directory $PROJECTS_PATH.
    For correct use the following environment variables must
    be defined:
        - PROJECTS_PATH   Root folder to store projects
        - PROJECT         Reference to current project folder
                          in $PROJECTS_PATH
        - OUTPUT          Reference to output folder in $PROJECT

    While creating a new project folder the symbolic link defined by
    $PROJECT is updated to the new project folder. Furthermore, the
    folder $OUTPUT is created. Each new project gets a prefix containing
    the date of creation.

    Optionally, a template folder $PROJECT_TEMPLATE can be defined.
    The content of the template folder is copied to new project folder
    during the creation process.

    Sample - Definition of variables in .bashrc:
        export PROJECTS_PATH ~/Projects
        export PROJECT $PROJECTS_PATH/current
        export OUTPUT $PROJECTS_PATH/current/out
        export PROJECT_TEMPLATE $PROJECTS_PATH/template

Examples:
    # Show current configuration
    project

    # Create new project folder
    project samplecustomer sampleproject
```

## Item 3: template

```
$ template --help

template - Replaces placeholders from given template

Usage: template [-e|-s] (-|FILE) [KEY=VALUE...]

Options:
    -e          Enables post-editing mode and opens
                configured editor while processing
    -h, --help  Prints this help message
    -s          Enables show mode listing all placeholders
                found in template

Description:
    The script replaces placeholder with format '{{ NAME }}' in
    a given template.

    Input:  Two different types of input are supported. Reading
            from stdin (-) and from file (FILE). Depending on the
            input type, the script expects '-' or a FILE path.

    Mode:   By the flags -s (show mode) and -e (edit mode) the
            behavoir can be controlled. In show mode the script only
            reads the template, gets the placeholders and prints
            them out. In edit mode, after replacing the placeholders
            the configured text editor is opened for furhter processing.

    Values: Any number of key-value pairs can be passed. The key name
            must corresponds to the name of the placeholder (case
            sensitive). If not all placeholders from the template are
            specified in argument list, they will be included in the
            output without further modification. Keys and values are
            separated by '=', for example 'name=Joe'.

    HINT: The used text editor is defined as global environment variable
          $EDITOR. It should be checked that the used editor does not
          write (logging) messages to stdout or stderr while processing
          the template, because the output is than included into the
          processed template also written to stdout. Furhtermore, the name
          of temporary file, loaded to text editor, should not be changed.
          Otherwise the canges from text editor are not applied. After
          finishing editing, the file must be saved and the text editor
          closed.

Examples:
    # Read template from stdin
    echo '{{ message }}' | template - message='Hello World'

    # Read template from file and open with text editor
    template -e input.txt message='Hello World' name=Joe age=42

    # Read template and show placeholder
    template -s input.txt
```

## Item 4: wordlist-diff

```
$ wordlist-diff --help

wordlist-diff - Prints all elements not in a word list

Usage: wordlist-diff FILE FILE [FILE...]

Options:
    -h, --help      Print this help message

Description:
    Determines the delta between a word list and other given ones.
    The delta is found by answering the question 'What elements
    are in the other lists that are not in the first list?'
    At least, the script expects two input files.

    The script is intended to support the process of extending own
    word lists.

    HINT: To work properly all files should have the same encoding
          and definition of line endings.

          For example, before processing, the files can be edited by
          dos2unix command.

Example:
    # Get elements not in the first list
    wordlist-diff first.txt second.txt third.txt other.txt
```
