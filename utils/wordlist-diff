#!/bin/bash
#
# GNU General Public License v3.0
#   
# Copyright (C) 2021 GhostActive
#
# Author
#    GhostActive, https://github.com/ghostactive
#
# Version
#    1.0
#

print_help()
{
    echo ""
    echo "wordlist-diff - Prints all elements not in a word list"
    echo ""
    echo "Usage: wordlist-diff FILE FILE [FILE...]"
    echo ""
    echo "Options:"
    echo "    -h, --help      Print this help message"
    echo ""
    echo "Description:"
    echo "    Determines the delta between a word list and other given ones."
    echo "    The delta is found by answering the question 'What elements"
    echo "    are in the other lists that are not in the first list?'"
    echo "    At least, the script expects two input files."
    echo ""
    echo "    The script is intended to support the process of extending own"
    echo "    word lists."
    echo ""
    echo "    HINT: To work properly all files should have the same encoding"
    echo "          and definition of line endings."
    echo ""
    echo "          For example, before processing, the files can be edited by"
    echo "          dos2unix command."
    echo ""
    echo "Example:"
    echo "    # Get elements not in the first list"
    echo "    wordlist-diff first.txt second.txt third.txt other.txt"
    echo ""

    return 0
}

while getopts ":h" ARGUMENT; do
    case "$ARGUMENT" in
        h)
            print_help
            exit 0
            ;;
        help)
            print_help
            exit 0
            ;;
   esac
done

if [ $# -lt 2 ]
then
    echo "An error occurred: Not enough parameter"
    
    print_help
    
    exit 1
fi

LISTS=( "$@" )

cat ${LISTS[@]:1} | sort -u | grep -v -x -F -f $1
