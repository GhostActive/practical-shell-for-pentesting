#!/bin/bash
#
# wordlist-diff
#
# Copyright (C) 2021 GhostActive
#
# Author
#    GhostActive, https://github.com/ghostactive
#
# License
#    GNU General Public License v3.0
#
# Version
#    1.0
#

print_help()
{
    echo ""
    echo "wordlist-diff - Prints all elements not in a word list in comparision to further"
    echo "                ones."
    echo ""
    echo "Usage: wordlist-diff FILE FILE [FILE...]"
    echo ""
    echo "Options:"
    echo "    -h      Print this help message"
    echo ""
    echo "Description:"
    echo "    Determines the delta between a word list and other given ones. The delta is"
    echo "    found by answering the question 'What elements are in the other lists that"
    echo "    are not in the first list?' At least, the script expects two input files."
    echo ""
    echo "    The script is intended to support the process of extending own word lists."
    echo ""
    echo "    HINT: To work properly all files should have the same encoding and"
    echo "          definition of line endings."
    echo ""
    echo "          For example, before processing, the files can be edited by 'dos2unix'"
    echo "          command."
    echo ""
    echo "Example:"
    echo "    # Get all elements not in first.txt, but in other ones"
    echo "    wordlist-diff first.txt second.txt third.txt other.txt"
    echo ""

    return 0
}

while getopts ":h" ARGUMENT; do
    case "$ARGUMENT" in
        h)
            print_help
            exit 0
            ;;
        help)
            print_help
            exit 0
            ;;
   esac
done

if [ $# -lt 2 ]
then
    echo "An error occurred: Not enough parameter."
    
    print_help
    
    exit 1
fi

LISTS=( "$@" )

cat ${LISTS[@]:1} | sort -u | grep -v -x -F -f $1
