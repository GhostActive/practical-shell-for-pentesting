# Effective Shell for Pentesting

## Introduction

## Overview

* [bash](https://www.gnu.org/software/bash/)
* [fish](https://fishshell.com/)
* [zsh](https://zsh.sourceforge.io/)

## Principles

#### KISS - Keep It Simple, Stupid

#### Everything is a file.

#### DRY - Donâ€™t Repeat Yourself

## Recipes

**Multiple Commands**

```bash
vim ~/.config/fish/config.fish; source ~/.config/fish/config.fish
```

```bash
git add --all; git commit -m "<Commit Message>"; git push
```

**Prefill the Shell History**

```
$ cat commands.txt
vim ~/.bashrc; source ~/.bashrc
while read ITEM; do ./sslscan "https://$ITEM" | tee sslscan_$(filename $ITEM)_$(now).txt; done < hosts.txt
$ cp commands.txt ~/.bash_history
```

```
$ cat commands.txt
- cmd: vim ~/.config/fish/config.fish; source ~/.config/fish/config.fish
  when: 0
- cmd: for ITEM in (cat hosts.txt); sslscan https://$ITEM | tee sslscan_(filename $ITEM)_(now).txt;end
  when: 0
$ cp commands.txt ~/.local/share/fish/fish_history
```

**Alias**

Filter to remove blank lines and comments
```bash
alias filter='egrep -v "^#|^\$"'
```
Sample - Annotated file with targets
```
$ cat hosts.txt 
#
# Frontend
#
example.com

#
# Backend
#
api.example.com
backoffice.example.com
$ filter hosts.txt            # Same like 'cat hosts.txt | filter'
example.com
api.example.com
backoffice.example.com
```
Print timestamp in Format: Year-Month-Day-HoursMinutesSeconds-Timezone
```bash
alias now='date +"%F-%H%M%S-%Z"'
```
Sample
```
$ now
2021-09-04-232820-CEST
$ sslscan https://example.com | tee sslscan_example-com_$(now).txt
$ ls
sslscan_example-com_2021-09-04-232820-CEST.txt
```


**Functions**

```bash
function ccd -d "Create and change directory; If directory already exists, than only change."
    test ! -d $argv && mkdir -p $argv
    cd $argv
end
```

## Tools

* [Terminator](https://terminator-gtk3.readthedocs.io/en/latest/) - Terminual emulator including grid view for multiple terminals
* [tmux](https://github.com/tmux/tmux/wiki) - Terminal multiplexer
* [i3wm](https://i3wm.org/) - Tilling window manager
